/* fifo_paging.c
   Simulate FIFO page replacement. */
#include <stdio.h>
#include <stdlib.h>

int main() {
    int n, frames;
    printf("Number of pages in reference string: ");
    scanf("%d",&n);
    int ref[n];
    printf("Enter reference string (space separated):\n");
    for(int i=0;i<n;i++) scanf("%d",&ref[i]);
    printf("Number of frames: ");
    scanf("%d",&frames);

    int frame[frames];
    for(int i=0;i<frames;i++) frame[i] = -1;
    int front = 0; // pointer to FIFO replacement
    int faults = 0;

    printf("\nStep-by-step (frames left->right):\n");
    for(int i=0;i<n;i++){
        int page = ref[i];
        int found = 0;
        for(int j=0;j<frames;j++) if(frame[j]==page) { found=1; break; }
        if(!found){
            // replace at front
            frame[front] = page;
            front = (front+1)%frames;
            faults++;
        }
        printf("Ref %2d : ", page);
        for(int j=0;j<frames;j++) {
            if(frame[j]==-1) printf(" - ");
            else printf("%2d ", frame[j]);
        }
        printf(found ? " (hit)\n" : " (fault)\n");
    }
    printf("\nTotal Page Faults = %d\n", faults);
    return 0;
}
